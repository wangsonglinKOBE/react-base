{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as symbolUtil from '../../util/symbol';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { saveOldStyle } from '../../animation/basicTrasition';\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      saveOldStyle(polygon);\n      saveOldStyle(polyline);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2); // Radar uses the visual encoded from itemStyle.\n\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty(); // Won't be ignore if normal state is not ignore.\n\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n          symbolPath.style.strokeNoScale = true;\n        }\n\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      enableHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n    });\n    this._data = data;\n  };\n\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\n\nexport default RadarView;","map":{"version":3,"sources":["D:/桌面/react基础原理分析/react_extension/node_modules/echarts/lib/chart/radar/RadarView.js"],"names":["__extends","graphic","setStatesStylesFromModel","enableHoverEmphasis","zrUtil","symbolUtil","ChartView","setLabelStyle","getLabelStatesModels","ZRImage","saveOldStyle","RadarView","_super","_this","apply","arguments","type","prototype","render","seriesModel","ecModel","api","polar","coordinateSystem","group","data","getData","oldData","_data","createSymbol","idx","symbolType","getItemVisual","symbolSize","normalizeSymbolSize","symbolPath","symbolRotate","attr","style","strokeNoScale","z2","scaleX","scaleY","rotation","Math","PI","updateSymbols","oldPoints","newPoints","symbolGroup","isInit","removeAll","i","length","__dimIdx","setPosition","x","y","add","getInitialPoints","points","map","pt","cx","cy","diff","getItemLayout","polygon","Polygon","polyline","Polyline","target","shape","initProps","itemGroup","Group","setItemGraphicEl","update","newIdx","oldIdx","getItemGraphicEl","childAt","updateProps","remove","execute","eachItemGraphicEl","itemModel","getItemModel","itemStyle","color","fill","useStyle","defaults","getModel","getLineStyle","stroke","areaStyleModel","polygonIgnore","isEmpty","parentModel","ignore","each","stateName","stateModel","stateIgnore","ensureState","getAreaStyle","opacity","decal","emphasisModel","itemHoverStyle","getItemStyle","eachChild","pathStyle","extend","image","width","height","setColor","pathEmphasisState","clone","defaultText","getStore","get","getDimensionIndex","isNaN","labelFetcher","hostModel","labelDataIndex","labelDimIndex","inheritColor","defaultOpacity"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as graphic from '../../util/graphic';\nimport { setStatesStylesFromModel, enableHoverEmphasis } from '../../util/states';\nimport * as zrUtil from 'zrender/lib/core/util';\nimport * as symbolUtil from '../../util/symbol';\nimport ChartView from '../../view/Chart';\nimport { setLabelStyle, getLabelStatesModels } from '../../label/labelStyle';\nimport ZRImage from 'zrender/lib/graphic/Image';\nimport { saveOldStyle } from '../../animation/basicTrasition';\n\nvar RadarView =\n/** @class */\nfunction (_super) {\n  __extends(RadarView, _super);\n\n  function RadarView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = RadarView.type;\n    return _this;\n  }\n\n  RadarView.prototype.render = function (seriesModel, ecModel, api) {\n    var polar = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n\n    function createSymbol(data, idx) {\n      var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n\n      if (symbolType === 'none') {\n        return;\n      }\n\n      var symbolSize = symbolUtil.normalizeSymbolSize(data.getItemVisual(idx, 'symbolSize'));\n      var symbolPath = symbolUtil.createSymbol(symbolType, -1, -1, 2, 2);\n      var symbolRotate = data.getItemVisual(idx, 'symbolRotate') || 0;\n      symbolPath.attr({\n        style: {\n          strokeNoScale: true\n        },\n        z2: 100,\n        scaleX: symbolSize[0] / 2,\n        scaleY: symbolSize[1] / 2,\n        rotation: symbolRotate * Math.PI / 180 || 0\n      });\n      return symbolPath;\n    }\n\n    function updateSymbols(oldPoints, newPoints, symbolGroup, data, idx, isInit) {\n      // Simply rerender all\n      symbolGroup.removeAll();\n\n      for (var i = 0; i < newPoints.length - 1; i++) {\n        var symbolPath = createSymbol(data, idx);\n\n        if (symbolPath) {\n          symbolPath.__dimIdx = i;\n\n          if (oldPoints[i]) {\n            symbolPath.setPosition(oldPoints[i]);\n            graphic[isInit ? 'initProps' : 'updateProps'](symbolPath, {\n              x: newPoints[i][0],\n              y: newPoints[i][1]\n            }, seriesModel, idx);\n          } else {\n            symbolPath.setPosition(newPoints[i]);\n          }\n\n          symbolGroup.add(symbolPath);\n        }\n      }\n    }\n\n    function getInitialPoints(points) {\n      return zrUtil.map(points, function (pt) {\n        return [polar.cx, polar.cy];\n      });\n    }\n\n    data.diff(oldData).add(function (idx) {\n      var points = data.getItemLayout(idx);\n\n      if (!points) {\n        return;\n      }\n\n      var polygon = new graphic.Polygon();\n      var polyline = new graphic.Polyline();\n      var target = {\n        shape: {\n          points: points\n        }\n      };\n      polygon.shape.points = getInitialPoints(points);\n      polyline.shape.points = getInitialPoints(points);\n      graphic.initProps(polygon, target, seriesModel, idx);\n      graphic.initProps(polyline, target, seriesModel, idx);\n      var itemGroup = new graphic.Group();\n      var symbolGroup = new graphic.Group();\n      itemGroup.add(polyline);\n      itemGroup.add(polygon);\n      itemGroup.add(symbolGroup);\n      updateSymbols(polyline.shape.points, points, symbolGroup, data, idx, true);\n      data.setItemGraphicEl(idx, itemGroup);\n    }).update(function (newIdx, oldIdx) {\n      var itemGroup = oldData.getItemGraphicEl(oldIdx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2);\n      var target = {\n        shape: {\n          points: data.getItemLayout(newIdx)\n        }\n      };\n\n      if (!target.shape.points) {\n        return;\n      }\n\n      updateSymbols(polyline.shape.points, target.shape.points, symbolGroup, data, newIdx, false);\n      saveOldStyle(polygon);\n      saveOldStyle(polyline);\n      graphic.updateProps(polyline, target, seriesModel);\n      graphic.updateProps(polygon, target, seriesModel);\n      data.setItemGraphicEl(newIdx, itemGroup);\n    }).remove(function (idx) {\n      group.remove(oldData.getItemGraphicEl(idx));\n    }).execute();\n    data.eachItemGraphicEl(function (itemGroup, idx) {\n      var itemModel = data.getItemModel(idx);\n      var polyline = itemGroup.childAt(0);\n      var polygon = itemGroup.childAt(1);\n      var symbolGroup = itemGroup.childAt(2); // Radar uses the visual encoded from itemStyle.\n\n      var itemStyle = data.getItemVisual(idx, 'style');\n      var color = itemStyle.fill;\n      group.add(itemGroup);\n      polyline.useStyle(zrUtil.defaults(itemModel.getModel('lineStyle').getLineStyle(), {\n        fill: 'none',\n        stroke: color\n      }));\n      setStatesStylesFromModel(polyline, itemModel, 'lineStyle');\n      setStatesStylesFromModel(polygon, itemModel, 'areaStyle');\n      var areaStyleModel = itemModel.getModel('areaStyle');\n      var polygonIgnore = areaStyleModel.isEmpty() && areaStyleModel.parentModel.isEmpty();\n      polygon.ignore = polygonIgnore;\n      zrUtil.each(['emphasis', 'select', 'blur'], function (stateName) {\n        var stateModel = itemModel.getModel([stateName, 'areaStyle']);\n        var stateIgnore = stateModel.isEmpty() && stateModel.parentModel.isEmpty(); // Won't be ignore if normal state is not ignore.\n\n        polygon.ensureState(stateName).ignore = stateIgnore && polygonIgnore;\n      });\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: color,\n        opacity: 0.7,\n        decal: itemStyle.decal\n      }));\n      var emphasisModel = itemModel.getModel('emphasis');\n      var itemHoverStyle = emphasisModel.getModel('itemStyle').getItemStyle();\n      symbolGroup.eachChild(function (symbolPath) {\n        if (symbolPath instanceof ZRImage) {\n          var pathStyle = symbolPath.style;\n          symbolPath.useStyle(zrUtil.extend({\n            // TODO other properties like x, y ?\n            image: pathStyle.image,\n            x: pathStyle.x,\n            y: pathStyle.y,\n            width: pathStyle.width,\n            height: pathStyle.height\n          }, itemStyle));\n        } else {\n          symbolPath.useStyle(itemStyle);\n          symbolPath.setColor(color);\n          symbolPath.style.strokeNoScale = true;\n        }\n\n        var pathEmphasisState = symbolPath.ensureState('emphasis');\n        pathEmphasisState.style = zrUtil.clone(itemHoverStyle);\n        var defaultText = data.getStore().get(data.getDimensionIndex(symbolPath.__dimIdx), idx);\n        (defaultText == null || isNaN(defaultText)) && (defaultText = '');\n        setLabelStyle(symbolPath, getLabelStatesModels(itemModel), {\n          labelFetcher: data.hostModel,\n          labelDataIndex: idx,\n          labelDimIndex: symbolPath.__dimIdx,\n          defaultText: defaultText,\n          inheritColor: color,\n          defaultOpacity: itemStyle.opacity\n        });\n      });\n      enableHoverEmphasis(itemGroup, emphasisModel.get('focus'), emphasisModel.get('blurScope'));\n    });\n    this._data = data;\n  };\n\n  RadarView.prototype.remove = function () {\n    this.group.removeAll();\n    this._data = null;\n  };\n\n  RadarView.type = 'radar';\n  return RadarView;\n}(ChartView);\n\nexport default RadarView;"]},"metadata":{},"sourceType":"module"}