{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../helper/BrushController';\nimport { layoutCovers } from './visualEncoding';\nimport ComponentView from '../../view/Component';\n\nvar BrushView =\n/** @class */\nfunction (_super) {\n  __extends(BrushView, _super);\n\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushView.type;\n    return _this;\n  }\n\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  }; // updateLayout: updateController,\n  // updateVisual: updateController,\n\n\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel); // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\n\nexport default BrushView;","map":{"version":3,"sources":["D:/桌面/react基础原理分析/react_extension/node_modules/echarts/lib/component/brush/BrushView.js"],"names":["__extends","zrUtil","BrushController","layoutCovers","ComponentView","BrushView","_super","_this","apply","arguments","type","prototype","init","ecModel","api","model","_brushController","getZr","on","bind","_onBrush","mount","render","brushModel","payload","_updateController","updateTransform","updateVisual","updateView","$from","id","setPanels","brushTargetManager","makePanelOpts","enableBrush","brushOption","updateCovers","areas","slice","dispose","eventParam","modelId","setOutputRanges","isEnd","removeOnClick","dispatchAction","brushId","clone"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport BrushController from '../helper/BrushController';\nimport { layoutCovers } from './visualEncoding';\nimport ComponentView from '../../view/Component';\n\nvar BrushView =\n/** @class */\nfunction (_super) {\n  __extends(BrushView, _super);\n\n  function BrushView() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = BrushView.type;\n    return _this;\n  }\n\n  BrushView.prototype.init = function (ecModel, api) {\n    this.ecModel = ecModel;\n    this.api = api;\n    this.model;\n    (this._brushController = new BrushController(api.getZr())).on('brush', zrUtil.bind(this._onBrush, this)).mount();\n  };\n\n  BrushView.prototype.render = function (brushModel, ecModel, api, payload) {\n    this.model = brushModel;\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateTransform = function (brushModel, ecModel, api, payload) {\n    // PENDING: `updateTransform` is a little tricky, whose layout need\n    // to be calculate mandatorily and other stages will not be performed.\n    // Take care the correctness of the logic. See #11754 .\n    layoutCovers(ecModel);\n\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateVisual = function (brushModel, ecModel, api, payload) {\n    this.updateTransform(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype.updateView = function (brushModel, ecModel, api, payload) {\n    this._updateController(brushModel, ecModel, api, payload);\n  };\n\n  BrushView.prototype._updateController = function (brushModel, ecModel, api, payload) {\n    // Do not update controller when drawing.\n    (!payload || payload.$from !== brushModel.id) && this._brushController.setPanels(brushModel.brushTargetManager.makePanelOpts(api)).enableBrush(brushModel.brushOption).updateCovers(brushModel.areas.slice());\n  }; // updateLayout: updateController,\n  // updateVisual: updateController,\n\n\n  BrushView.prototype.dispose = function () {\n    this._brushController.dispose();\n  };\n\n  BrushView.prototype._onBrush = function (eventParam) {\n    var modelId = this.model.id;\n    var areas = this.model.brushTargetManager.setOutputRanges(eventParam.areas, this.ecModel); // Action is not dispatched on drag end, because the drag end\n    // emits the same params with the last drag move event, and\n    // may have some delay when using touch pad, which makes\n    // animation not smooth (when using debounce).\n\n    (!eventParam.isEnd || eventParam.removeOnClick) && this.api.dispatchAction({\n      type: 'brush',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n    eventParam.isEnd && this.api.dispatchAction({\n      type: 'brushEnd',\n      brushId: modelId,\n      areas: zrUtil.clone(areas),\n      $from: modelId\n    });\n  };\n\n  BrushView.type = 'brush';\n  return BrushView;\n}(ComponentView);\n\nexport default BrushView;"]},"metadata":{},"sourceType":"module"}