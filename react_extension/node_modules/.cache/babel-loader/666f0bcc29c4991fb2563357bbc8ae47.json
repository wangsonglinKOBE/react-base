{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport Model from '../../model/Model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var value = node.getLayout().value;\n      var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n      return createTooltipMarkup('nameValue', {\n        name: name_1 != null ? name_1 + '' : null,\n        value: value,\n        noValue: noValue(value)\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;","map":{"version":3,"sources":["D:/桌面/react基础原理分析/react_extension/node_modules/echarts/lib/chart/sankey/SankeySeries.js"],"names":["__extends","SeriesModel","createGraphFromNodeEdge","Model","createTooltipMarkup","SankeySeriesModel","_super","_this","apply","arguments","type","prototype","getInitialData","option","ecModel","links","edges","nodes","data","levels","levelModels","i","length","depth","process","env","NODE_ENV","Error","graph","beforeLink","nodeData","edgeData","wrapMethod","model","idx","seriesModel","parentModel","layout","getData","getItemLayout","nodeDepth","levelModel","edge","getGraph","getEdgeByIndex","node1","getLayout","setNodePosition","dataIndex","localPosition","dataItem","localX","localY","getEdgeData","formatTooltip","multipleSeries","dataType","noValue","val","isNaN","params","getDataParams","rawDataOpt","edgeValue","value","edgeName","source","target","name","node","getNodeByIndex","name_1","optionUpdated","call","nodeValue","defaultOption","zlevel","z","coordinateSystem","left","top","right","bottom","orient","nodeWidth","nodeGap","draggable","layoutIterations","label","show","position","fontSize","nodeAlign","lineStyle","color","opacity","curveness","emphasis","select","itemStyle","borderColor","animationEasing","animationDuration"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport SeriesModel from '../../model/Series';\nimport createGraphFromNodeEdge from '../helper/createGraphFromNodeEdge';\nimport Model from '../../model/Model';\nimport { createTooltipMarkup } from '../../component/tooltip/tooltipMarkup';\n\nvar SankeySeriesModel =\n/** @class */\nfunction (_super) {\n  __extends(SankeySeriesModel, _super);\n\n  function SankeySeriesModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = SankeySeriesModel.type;\n    return _this;\n  }\n  /**\n   * Init a graph data structure from data in option series\n   */\n\n\n  SankeySeriesModel.prototype.getInitialData = function (option, ecModel) {\n    var links = option.edges || option.links;\n    var nodes = option.data || option.nodes;\n    var levels = option.levels;\n    this.levelModels = [];\n    var levelModels = this.levelModels;\n\n    for (var i = 0; i < levels.length; i++) {\n      if (levels[i].depth != null && levels[i].depth >= 0) {\n        levelModels[levels[i].depth] = new Model(levels[i], this, ecModel);\n      } else {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error('levels[i].depth is mandatory and should be natural number');\n        }\n      }\n    }\n\n    if (nodes && links) {\n      var graph = createGraphFromNodeEdge(nodes, links, this, true, beforeLink);\n      return graph.data;\n    }\n\n    function beforeLink(nodeData, edgeData) {\n      nodeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var layout = seriesModel.getData().getItemLayout(idx);\n\n        if (layout) {\n          var nodeDepth = layout.depth;\n          var levelModel = seriesModel.levelModels[nodeDepth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n      edgeData.wrapMethod('getItemModel', function (model, idx) {\n        var seriesModel = model.parentModel;\n        var edge = seriesModel.getGraph().getEdgeByIndex(idx);\n        var layout = edge.node1.getLayout();\n\n        if (layout) {\n          var depth = layout.depth;\n          var levelModel = seriesModel.levelModels[depth];\n\n          if (levelModel) {\n            model.parentModel = levelModel;\n          }\n        }\n\n        return model;\n      });\n    }\n  };\n\n  SankeySeriesModel.prototype.setNodePosition = function (dataIndex, localPosition) {\n    var nodes = this.option.data || this.option.nodes;\n    var dataItem = nodes[dataIndex];\n    dataItem.localX = localPosition[0];\n    dataItem.localY = localPosition[1];\n  };\n  /**\n   * Return the graphic data structure\n   *\n   * @return graphic data structure\n   */\n\n\n  SankeySeriesModel.prototype.getGraph = function () {\n    return this.getData().graph;\n  };\n  /**\n   * Get edge data of graphic data structure\n   *\n   * @return data structure of list\n   */\n\n\n  SankeySeriesModel.prototype.getEdgeData = function () {\n    return this.getGraph().edgeData;\n  };\n\n  SankeySeriesModel.prototype.formatTooltip = function (dataIndex, multipleSeries, dataType) {\n    function noValue(val) {\n      return isNaN(val) || val == null;\n    } // dataType === 'node' or empty do not show tooltip by default\n\n\n    if (dataType === 'edge') {\n      var params = this.getDataParams(dataIndex, dataType);\n      var rawDataOpt = params.data;\n      var edgeValue = params.value;\n      var edgeName = rawDataOpt.source + ' -- ' + rawDataOpt.target;\n      return createTooltipMarkup('nameValue', {\n        name: edgeName,\n        value: edgeValue,\n        noValue: noValue(edgeValue)\n      });\n    } // dataType === 'node'\n    else {\n        var node = this.getGraph().getNodeByIndex(dataIndex);\n        var value = node.getLayout().value;\n        var name_1 = this.getDataParams(dataIndex, dataType).data.name;\n        return createTooltipMarkup('nameValue', {\n          name: name_1 != null ? name_1 + '' : null,\n          value: value,\n          noValue: noValue(value)\n        });\n      }\n  };\n\n  SankeySeriesModel.prototype.optionUpdated = function () {}; // Override Series.getDataParams()\n\n\n  SankeySeriesModel.prototype.getDataParams = function (dataIndex, dataType) {\n    var params = _super.prototype.getDataParams.call(this, dataIndex, dataType);\n\n    if (params.value == null && dataType === 'node') {\n      var node = this.getGraph().getNodeByIndex(dataIndex);\n      var nodeValue = node.getLayout().value;\n      params.value = nodeValue;\n    }\n\n    return params;\n  };\n\n  SankeySeriesModel.type = 'series.sankey';\n  SankeySeriesModel.defaultOption = {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'view',\n    left: '5%',\n    top: '5%',\n    right: '20%',\n    bottom: '5%',\n    orient: 'horizontal',\n    nodeWidth: 20,\n    nodeGap: 8,\n    draggable: true,\n    layoutIterations: 32,\n    label: {\n      show: true,\n      position: 'right',\n      fontSize: 12\n    },\n    levels: [],\n    nodeAlign: 'justify',\n    lineStyle: {\n      color: '#314656',\n      opacity: 0.2,\n      curveness: 0.5\n    },\n    emphasis: {\n      label: {\n        show: true\n      },\n      lineStyle: {\n        opacity: 0.5\n      }\n    },\n    select: {\n      itemStyle: {\n        borderColor: '#212121'\n      }\n    },\n    animationEasing: 'linear',\n    animationDuration: 1000\n  };\n  return SankeySeriesModel;\n}(SeriesModel);\n\nexport default SankeySeriesModel;"]},"metadata":{},"sourceType":"module"}