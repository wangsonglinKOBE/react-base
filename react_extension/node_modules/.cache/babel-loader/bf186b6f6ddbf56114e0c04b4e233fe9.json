{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapModel from './VisualMapModel';\nimport * as numberUtil from '../../util/number';\nimport { inheritDefaultOption } from '../../util/component'; // Constant\n\nvar DEFAULT_BAR_BOUND = [20, 140];\n\nvar ContinuousModel =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousModel, _super);\n\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n\n\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n\n\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n\n\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    } // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n\n  });\n  return ContinuousModel;\n}(VisualMapModel);\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nexport default ContinuousModel;","map":{"version":3,"sources":["D:/桌面/react基础原理分析/react_extension/node_modules/echarts/lib/component/visualMap/ContinuousModel.js"],"names":["__extends","zrUtil","VisualMapModel","numberUtil","inheritDefaultOption","DEFAULT_BAR_BOUND","ContinuousModel","_super","_this","apply","arguments","type","prototype","optionUpdated","newOption","isInit","resetExtent","resetVisual","mappingOption","mappingMethod","dataExtent","getExtent","_resetRange","resetItemSize","itemSize","isNaN","range","option","auto","isArray","reverse","Math","max","min","completeVisualOption","each","stateList","state","symbolSize","controller","setSelected","selected","slice","getSelected","dataInterval","asc","get","getValueState","value","findTargetDataIndices","result","eachTargetSeries","seriesModel","dataIndices","data","getData","getDataDimensionIndex","dataIndex","push","seriesId","id","getVisualMeta","getColorVisual","oVals","getColorStopValues","iVals","stops","setStop","valueState","color","iIdx","oIdx","iLen","length","oLen","first","stopsLen","outerColors","defaultOption","align","calculable","hoverLink","realtime","handleIcon","handleSize","handleStyle","borderColor","borderWidth","indicatorIcon","indicatorSize","indicatorStyle","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","visualMapModel","count","step","stopValues","i"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { __extends } from \"tslib\";\nimport * as zrUtil from 'zrender/lib/core/util';\nimport VisualMapModel from './VisualMapModel';\nimport * as numberUtil from '../../util/number';\nimport { inheritDefaultOption } from '../../util/component'; // Constant\n\nvar DEFAULT_BAR_BOUND = [20, 140];\n\nvar ContinuousModel =\n/** @class */\nfunction (_super) {\n  __extends(ContinuousModel, _super);\n\n  function ContinuousModel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.type = ContinuousModel.type;\n    return _this;\n  }\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.optionUpdated = function (newOption, isInit) {\n    _super.prototype.optionUpdated.apply(this, arguments);\n\n    this.resetExtent();\n    this.resetVisual(function (mappingOption) {\n      mappingOption.mappingMethod = 'linear';\n      mappingOption.dataExtent = this.getExtent();\n    });\n\n    this._resetRange();\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.resetItemSize = function () {\n    _super.prototype.resetItemSize.apply(this, arguments);\n\n    var itemSize = this.itemSize;\n    (itemSize[0] == null || isNaN(itemSize[0])) && (itemSize[0] = DEFAULT_BAR_BOUND[0]);\n    (itemSize[1] == null || isNaN(itemSize[1])) && (itemSize[1] = DEFAULT_BAR_BOUND[1]);\n  };\n  /**\n   * @private\n   */\n\n\n  ContinuousModel.prototype._resetRange = function () {\n    var dataExtent = this.getExtent();\n    var range = this.option.range;\n\n    if (!range || range.auto) {\n      // `range` should always be array (so we dont use other\n      // value like 'auto') for user-friend. (consider getOption).\n      dataExtent.auto = 1;\n      this.option.range = dataExtent;\n    } else if (zrUtil.isArray(range)) {\n      if (range[0] > range[1]) {\n        range.reverse();\n      }\n\n      range[0] = Math.max(range[0], dataExtent[0]);\n      range[1] = Math.min(range[1], dataExtent[1]);\n    }\n  };\n  /**\n   * @protected\n   * @override\n   */\n\n\n  ContinuousModel.prototype.completeVisualOption = function () {\n    _super.prototype.completeVisualOption.apply(this, arguments);\n\n    zrUtil.each(this.stateList, function (state) {\n      var symbolSize = this.option.controller[state].symbolSize;\n\n      if (symbolSize && symbolSize[0] !== symbolSize[1]) {\n        symbolSize[0] = symbolSize[1] / 3; // For good looking.\n      }\n    }, this);\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.setSelected = function (selected) {\n    this.option.range = selected.slice();\n\n    this._resetRange();\n  };\n  /**\n   * @public\n   */\n\n\n  ContinuousModel.prototype.getSelected = function () {\n    var dataExtent = this.getExtent();\n    var dataInterval = numberUtil.asc((this.get('range') || []).slice()); // Clamp\n\n    dataInterval[0] > dataExtent[1] && (dataInterval[0] = dataExtent[1]);\n    dataInterval[1] > dataExtent[1] && (dataInterval[1] = dataExtent[1]);\n    dataInterval[0] < dataExtent[0] && (dataInterval[0] = dataExtent[0]);\n    dataInterval[1] < dataExtent[0] && (dataInterval[1] = dataExtent[0]);\n    return dataInterval;\n  };\n  /**\n   * @override\n   */\n\n\n  ContinuousModel.prototype.getValueState = function (value) {\n    var range = this.option.range;\n    var dataExtent = this.getExtent(); // When range[0] === dataExtent[0], any value larger than dataExtent[0] maps to 'inRange'.\n    // range[1] is processed likewise.\n\n    return (range[0] <= dataExtent[0] || range[0] <= value) && (range[1] >= dataExtent[1] || value <= range[1]) ? 'inRange' : 'outOfRange';\n  };\n\n  ContinuousModel.prototype.findTargetDataIndices = function (range) {\n    var result = [];\n    this.eachTargetSeries(function (seriesModel) {\n      var dataIndices = [];\n      var data = seriesModel.getData();\n      data.each(this.getDataDimensionIndex(data), function (value, dataIndex) {\n        range[0] <= value && value <= range[1] && dataIndices.push(dataIndex);\n      }, this);\n      result.push({\n        seriesId: seriesModel.id,\n        dataIndex: dataIndices\n      });\n    }, this);\n    return result;\n  };\n  /**\n   * @implement\n   */\n\n\n  ContinuousModel.prototype.getVisualMeta = function (getColorVisual) {\n    var oVals = getColorStopValues(this, 'outOfRange', this.getExtent());\n    var iVals = getColorStopValues(this, 'inRange', this.option.range.slice());\n    var stops = [];\n\n    function setStop(value, valueState) {\n      stops.push({\n        value: value,\n        color: getColorVisual(value, valueState)\n      });\n    } // Format to: outOfRange -- inRange -- outOfRange.\n\n\n    var iIdx = 0;\n    var oIdx = 0;\n    var iLen = iVals.length;\n    var oLen = oVals.length;\n\n    for (; oIdx < oLen && (!iVals.length || oVals[oIdx] <= iVals[0]); oIdx++) {\n      // If oVal[oIdx] === iVals[iIdx], oVal[oIdx] should be ignored.\n      if (oVals[oIdx] < iVals[iIdx]) {\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    for (var first = 1; iIdx < iLen; iIdx++, first = 0) {\n      // If range is full, value beyond min, max will be clamped.\n      // make a singularity\n      first && stops.length && setStop(iVals[iIdx], 'outOfRange');\n      setStop(iVals[iIdx], 'inRange');\n    }\n\n    for (var first = 1; oIdx < oLen; oIdx++) {\n      if (!iVals.length || iVals[iVals.length - 1] < oVals[oIdx]) {\n        // make a singularity\n        if (first) {\n          stops.length && setStop(stops[stops.length - 1].value, 'outOfRange');\n          first = 0;\n        }\n\n        setStop(oVals[oIdx], 'outOfRange');\n      }\n    }\n\n    var stopsLen = stops.length;\n    return {\n      stops: stops,\n      outerColors: [stopsLen ? stops[0].color : 'transparent', stopsLen ? stops[stopsLen - 1].color : 'transparent']\n    };\n  };\n\n  ContinuousModel.type = 'visualMap.continuous';\n  ContinuousModel.defaultOption = inheritDefaultOption(VisualMapModel.defaultOption, {\n    align: 'auto',\n    calculable: false,\n    hoverLink: true,\n    realtime: true,\n    handleIcon: 'path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z',\n    handleSize: '120%',\n    handleStyle: {\n      borderColor: '#fff',\n      borderWidth: 1\n    },\n    indicatorIcon: 'circle',\n    indicatorSize: '50%',\n    indicatorStyle: {\n      borderColor: '#fff',\n      borderWidth: 2,\n      shadowBlur: 2,\n      shadowOffsetX: 1,\n      shadowOffsetY: 1,\n      shadowColor: 'rgba(0,0,0,0.2)'\n    } // emphasis: {\n    //     handleStyle: {\n    //         shadowBlur: 3,\n    //         shadowOffsetX: 1,\n    //         shadowOffsetY: 1,\n    //         shadowColor: 'rgba(0,0,0,0.2)'\n    //     }\n    // }\n\n  });\n  return ContinuousModel;\n}(VisualMapModel);\n\nfunction getColorStopValues(visualMapModel, valueState, dataExtent) {\n  if (dataExtent[0] === dataExtent[1]) {\n    return dataExtent.slice();\n  } // When using colorHue mapping, it is not linear color any more.\n  // Moreover, canvas gradient seems not to be accurate linear.\n  // FIXME\n  // Should be arbitrary value 100? or based on pixel size?\n\n\n  var count = 200;\n  var step = (dataExtent[1] - dataExtent[0]) / count;\n  var value = dataExtent[0];\n  var stopValues = [];\n\n  for (var i = 0; i <= count && value < dataExtent[1]; i++) {\n    stopValues.push(value);\n    value += step;\n  }\n\n  stopValues.push(dataExtent[1]);\n  return stopValues;\n}\n\nexport default ContinuousModel;"]},"metadata":{},"sourceType":"module"}