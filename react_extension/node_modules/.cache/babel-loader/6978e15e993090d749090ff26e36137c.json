{"ast":null,"code":"var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n  if (!inputShape) {\n    return;\n  }\n\n  var x1 = inputShape.x1;\n  var x2 = inputShape.x2;\n  var y1 = inputShape.y1;\n  var y2 = inputShape.y2;\n  outputShape.x1 = x1;\n  outputShape.x2 = x2;\n  outputShape.y1 = y1;\n  outputShape.y2 = y2;\n  var lineWidth = style && style.lineWidth;\n\n  if (!lineWidth) {\n    return outputShape;\n  }\n\n  if (round(x1 * 2) === round(x2 * 2)) {\n    outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n  }\n\n  if (round(y1 * 2) === round(y2 * 2)) {\n    outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n  }\n\n  return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n  if (!inputShape) {\n    return;\n  }\n\n  var originX = inputShape.x;\n  var originY = inputShape.y;\n  var originWidth = inputShape.width;\n  var originHeight = inputShape.height;\n  outputShape.x = originX;\n  outputShape.y = originY;\n  outputShape.width = originWidth;\n  outputShape.height = originHeight;\n  var lineWidth = style && style.lineWidth;\n\n  if (!lineWidth) {\n    return outputShape;\n  }\n\n  outputShape.x = subPixelOptimize(originX, lineWidth, true);\n  outputShape.y = subPixelOptimize(originY, lineWidth, true);\n  outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n  outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n  return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n  if (!lineWidth) {\n    return position;\n  }\n\n  var doubledPosition = round(position * 2);\n  return (doubledPosition + round(lineWidth)) % 2 === 0 ? doubledPosition / 2 : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}","map":{"version":3,"sources":["D:/桌面/react基础原理分析/react_extension/node_modules/zrender/lib/graphic/helper/subPixelOptimize.js"],"names":["round","Math","subPixelOptimizeLine","outputShape","inputShape","style","x1","x2","y1","y2","lineWidth","subPixelOptimize","subPixelOptimizeRect","originX","x","originY","y","originWidth","width","originHeight","height","max","position","positiveOrNegative","doubledPosition"],"mappings":"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","sourcesContent":["var round = Math.round;\nexport function subPixelOptimizeLine(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var x1 = inputShape.x1;\n    var x2 = inputShape.x2;\n    var y1 = inputShape.y1;\n    var y2 = inputShape.y2;\n    outputShape.x1 = x1;\n    outputShape.x2 = x2;\n    outputShape.y1 = y1;\n    outputShape.y2 = y2;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    if (round(x1 * 2) === round(x2 * 2)) {\n        outputShape.x1 = outputShape.x2 = subPixelOptimize(x1, lineWidth, true);\n    }\n    if (round(y1 * 2) === round(y2 * 2)) {\n        outputShape.y1 = outputShape.y2 = subPixelOptimize(y1, lineWidth, true);\n    }\n    return outputShape;\n}\nexport function subPixelOptimizeRect(outputShape, inputShape, style) {\n    if (!inputShape) {\n        return;\n    }\n    var originX = inputShape.x;\n    var originY = inputShape.y;\n    var originWidth = inputShape.width;\n    var originHeight = inputShape.height;\n    outputShape.x = originX;\n    outputShape.y = originY;\n    outputShape.width = originWidth;\n    outputShape.height = originHeight;\n    var lineWidth = style && style.lineWidth;\n    if (!lineWidth) {\n        return outputShape;\n    }\n    outputShape.x = subPixelOptimize(originX, lineWidth, true);\n    outputShape.y = subPixelOptimize(originY, lineWidth, true);\n    outputShape.width = Math.max(subPixelOptimize(originX + originWidth, lineWidth, false) - outputShape.x, originWidth === 0 ? 0 : 1);\n    outputShape.height = Math.max(subPixelOptimize(originY + originHeight, lineWidth, false) - outputShape.y, originHeight === 0 ? 0 : 1);\n    return outputShape;\n}\nexport function subPixelOptimize(position, lineWidth, positiveOrNegative) {\n    if (!lineWidth) {\n        return position;\n    }\n    var doubledPosition = round(position * 2);\n    return (doubledPosition + round(lineWidth)) % 2 === 0\n        ? doubledPosition / 2\n        : (doubledPosition + (positiveOrNegative ? 1 : -1)) / 2;\n}\n"]},"metadata":{},"sourceType":"module"}