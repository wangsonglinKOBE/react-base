{"ast":null,"code":"/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}","map":{"version":3,"sources":["D:/桌面/react基础原理分析/react_extension/node_modules/echarts/lib/component/dataZoom/helper.js"],"names":["indexOf","createHashMap","assert","DATA_ZOOM_AXIS_DIMENSIONS","SERIES_COORDS","isCoordSupported","seriesModel","coordType","get","getAxisMainType","axisDim","process","env","NODE_ENV","getAxisIndexPropName","getAxisIdPropName","findEffectedDataZooms","ecModel","payload","axisRecords","effectedModels","effectedModelMap","eachComponent","mainType","query","dataZoomModel","uid","addToEffected","foundNewLink","processSingle","isLinked","dataZoom","set","push","markAxisControlled","isLink","eachTargetAxis","axisIndex","axisIdxArr","collectReferCoordSysModelInfo","coordSysInfoWrap","infoList","infoMap","axisModel","getComponent","coordSysModel","getCoordSysModel","coordSysUid","coordSysInfo","model","axisModels"],"mappings":"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","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\n/**\n * AUTO-GENERATED FILE. DO NOT MODIFY.\n */\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nimport { indexOf, createHashMap, assert } from 'zrender/lib/core/util';\nexport var DATA_ZOOM_AXIS_DIMENSIONS = ['x', 'y', 'radius', 'angle', 'single']; // Supported coords.\n// FIXME: polar has been broken (but rarely used).\n\nvar SERIES_COORDS = ['cartesian2d', 'polar', 'singleAxis'];\nexport function isCoordSupported(seriesModel) {\n  var coordType = seriesModel.get('coordinateSystem');\n  return indexOf(SERIES_COORDS, coordType) >= 0;\n}\nexport function getAxisMainType(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'Axis';\n}\nexport function getAxisIndexPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisIndex';\n}\nexport function getAxisIdPropName(axisDim) {\n  if (process.env.NODE_ENV !== 'production') {\n    assert(axisDim);\n  }\n\n  return axisDim + 'AxisId';\n}\n/**\n * If two dataZoomModels has the same axis controlled, we say that they are 'linked'.\n * This function finds all linked dataZoomModels start from the given payload.\n */\n\nexport function findEffectedDataZooms(ecModel, payload) {\n  // Key: `DataZoomAxisDimension`\n  var axisRecords = createHashMap();\n  var effectedModels = []; // Key: uid of dataZoomModel\n\n  var effectedModelMap = createHashMap(); // Find the dataZooms specified by payload.\n\n  ecModel.eachComponent({\n    mainType: 'dataZoom',\n    query: payload\n  }, function (dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid)) {\n      addToEffected(dataZoomModel);\n    }\n  }); // Start from the given dataZoomModels, travel the graph to find\n  // all of the linked dataZoom models.\n\n  var foundNewLink;\n\n  do {\n    foundNewLink = false;\n    ecModel.eachComponent('dataZoom', processSingle);\n  } while (foundNewLink);\n\n  function processSingle(dataZoomModel) {\n    if (!effectedModelMap.get(dataZoomModel.uid) && isLinked(dataZoomModel)) {\n      addToEffected(dataZoomModel);\n      foundNewLink = true;\n    }\n  }\n\n  function addToEffected(dataZoom) {\n    effectedModelMap.set(dataZoom.uid, true);\n    effectedModels.push(dataZoom);\n    markAxisControlled(dataZoom);\n  }\n\n  function isLinked(dataZoomModel) {\n    var isLink = false;\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      var axisIdxArr = axisRecords.get(axisDim);\n\n      if (axisIdxArr && axisIdxArr[axisIndex]) {\n        isLink = true;\n      }\n    });\n    return isLink;\n  }\n\n  function markAxisControlled(dataZoomModel) {\n    dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n      (axisRecords.get(axisDim) || axisRecords.set(axisDim, []))[axisIndex] = true;\n    });\n  }\n\n  return effectedModels;\n}\n/**\n * Find the first target coordinate system.\n * Available after model built.\n *\n * @return Like {\n *                  grid: [\n *                      {model: coord0, axisModels: [axis1, axis3], coordIndex: 1},\n *                      {model: coord1, axisModels: [axis0, axis2], coordIndex: 0},\n *                      ...\n *                  ],  // cartesians must not be null/undefined.\n *                  polar: [\n *                      {model: coord0, axisModels: [axis4], coordIndex: 0},\n *                      ...\n *                  ],  // polars must not be null/undefined.\n *                  singleAxis: [\n *                      {model: coord0, axisModels: [], coordIndex: 0}\n *                  ]\n *              }\n */\n\nexport function collectReferCoordSysModelInfo(dataZoomModel) {\n  var ecModel = dataZoomModel.ecModel;\n  var coordSysInfoWrap = {\n    infoList: [],\n    infoMap: createHashMap()\n  };\n  dataZoomModel.eachTargetAxis(function (axisDim, axisIndex) {\n    var axisModel = ecModel.getComponent(getAxisMainType(axisDim), axisIndex);\n\n    if (!axisModel) {\n      return;\n    }\n\n    var coordSysModel = axisModel.getCoordSysModel();\n\n    if (!coordSysModel) {\n      return;\n    }\n\n    var coordSysUid = coordSysModel.uid;\n    var coordSysInfo = coordSysInfoWrap.infoMap.get(coordSysUid);\n\n    if (!coordSysInfo) {\n      coordSysInfo = {\n        model: coordSysModel,\n        axisModels: []\n      };\n      coordSysInfoWrap.infoList.push(coordSysInfo);\n      coordSysInfoWrap.infoMap.set(coordSysUid, coordSysInfo);\n    }\n\n    coordSysInfo.axisModels.push(axisModel);\n  });\n  return coordSysInfoWrap;\n}"]},"metadata":{},"sourceType":"module"}